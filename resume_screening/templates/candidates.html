{% extends "screening.html" %}

{% block title %}All Candidates{% endblock %}

{% block content %}
<div class="p-9 bg-white rounded-2xl shadow-lg">
    <div class='flex justify-between items-center'>
        <p class='text-2xl text-stone-700 font-semibold'>Candidates Shortlist</p>
        <div class="flex items-center gap-2 w-[20vw] pl-3 text-stone-600 bg-stone-100 rounded-lg">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-search-icon lucide-search"><path d="m21 21-4.34-4.34"/><circle cx="11" cy="11" r="8"/></svg>
            <input type="search" name="search" id="" placeholder='Search candidates...' class='text-sm p-2 bg-stone-100 rounded-lg outline-none'>
        </div>
        <div class="filters flex justify-end gap-2 w-[20vw] h-full text-sm">
            <button class='px-4 py-2 text-stone-500 border border-stone-300 rounded-lg'>
                All
            </button>
            <button class='px-4 py-2 text-stone-500 border border-stone-300 rounded-lg'>
                80%+
            </button>
            <button class='px-4 py-2 text-stone-500 border border-stone-300 rounded-lg'>
                60-79%
            </button>
            <button class='px-4 py-2 text-stone-500 border border-stone-300 rounded-lg'>
                <60%
            </button>
        </div>
    </div>
    {% if candidates %}
    <div class="mt-6 w-full">
        <table class='w-full border-separate border-spacing-y-6'>
            <thead>
                <tr class='text-stone-500 text-[12px]'>
                    <th class='font-semibold text-start'>CANDIDATE</th>
                    <th class='text-start'>MATCH SCORE</th>
                    <th class='text-start'>KEY SKILLS</th>
                    <th class='text-start'>STATUS</th>
                    <th class='text-start'>ACTIONS</th>
                </tr>
            </thead>
            <tbody class=''>
                {% for user in users %}
                <tr class='text-stone-700'>
                    <td class='flex flex-col'>
                        <span class='text-lg font-semibold'>{{ user.name }}</span>
                        <span class='text-[12px] text-stone-500'>{{ user.email }}</span>
                    </td>
                    <td class='text-sm font-semibold'>
                        <span class='px-2 py-1 {% if user.score >= 80 %}text-green-800 bg-green-200 {% else %}text-amber-800 bg-amber-100{% endif %} rounded-lg'>
                            {{ user.score }}%
                        </span>
                    </td>
                    <td>
                        <p class='flex gap-3 text-[12px] text-stone-500'>
                            {% for skill in user.skills %}
                            <span>{{ skill }}</span>
                            {% endfor %}
                        </p>
                    </td>
                    <td>
                        <p class='text-[13px] font-semibold w-fit'>
                            {% if user.status %} <span class='text-green-800 bg-green-200 px-3 py-1 rounded-lg'>Shortlisted</span> 
                            {% else %} <span class='text-amber-800 bg-amber-100 px-3 py-1 rounded-lg'>Review</span>
                            {% endif %}
                        </p>
                    </td>
                    <td>
                        <div class='flex items-center gap-5'>
                            <span class='cursor-pointer hover:text-blue-700' title='View'>
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-eye-icon lucide-eye"><path d="M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"/><circle cx="12" cy="12" r="3"/></svg>
                            </span>
                            <span class='cursor-pointer hover:text-blue-700' title='Contact'>
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-mail-icon lucide-mail"><path d="m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7"/><rect x="2" y="4" width="20" height="16" rx="2"/></svg>
                            </span>
                            <span class='cursor-pointer hover:text-blue-700' title='Remove' onclick = "if(confirm('Delete this user?')) window.location.href = '{% url 'delete_user' user.id %}'">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-trash-icon lucide-trash"><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"/><path d="M3 6h18"/><path d="M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg>
                            </span>
                        </div>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    <div class="flex justify-center gap-4">
        <button class='flex gap-2 items-center text-white text-sm font-semibold bg-blue-600 px-9 py-3 rounded-lg'>
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.75" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-down-to-line-icon lucide-arrow-down-to-line"><path d="M12 17V3"/><path d="m6 11 6 6 6-6"/><path d="M19 21H5"/></svg>
            Export Results
        </button>
        <button class='flex gap-2 items-center text-blue-700 hover:text-white hover:bg-blue-600 text-sm font-semibold px-9 py-3 border-2 border-blue-700 rounded-lg transition-colors duration-[300ms]'>
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.75" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-calendar-icon lucide-calendar"><path d="M8 2v4"/><path d="M16 2v4"/><rect width="18" height="18" x="3" y="4" rx="2"/><path d="M3 10h18"/></svg>
            Schedule Interviews
        </button>
    </div>
    {% else %}
    <p class='flex justify-center mt-9 mb-4 text-stone-400'>No Candidates</p>
    {% endif %}
</div>
{% endblock %}